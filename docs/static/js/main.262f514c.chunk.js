(this.webpackJsonpactividad_3=this.webpackJsonpactividad_3||[]).push([[0],{38:function(e,t,c){},39:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(29),r=c.n(s),i=(c(38),c(11)),o=c(9),l=(c(39),c.p+"static/media/logo.dae854f5.png"),d=c(66),u=c(0);var m=function(e){var t=e.onLogoClick,c=e.onProfileClick;return Object(u.jsx)("nav",{className:"navbar navbar-expand-md navbar-expand-lg navbar-light",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)("a",{onClick:function(){t("Post")},children:Object(u.jsx)("img",{src:l,alt:"",id:"logo"})}),Object(u.jsx)("div",{onClick:function(){c("Logo")},children:Object(u.jsx)(d.a,{className:"bi-circle-person"})})]})})},j=c(12),b=c.n(j),x=c(18),h=c(67),O=c(30),v=c.n(O).a.create({baseURL:"https://three-points.herokuapp.com/",withCredentials:!0});v.interceptors.response.use((function(e){return e}),(function(e){401===(null===e||void 0===e?void 0:e.response.status)&&(localStorage.clear(),window.location.replace("/login"))}));var f=function(){return v.get("api/posts")};var p=function(e){var t=e.id,c=e.postid,a=e.image,s=e.createdAt,r=e.author,i=e.text,l=e.likes,d=e.comments,m=Object(n.useState)(l),j=Object(o.a)(m,2),O=j[0],p=j[1],g=function(){(function(e){return v.post("api/posts/".concat(e,"/like"))})(c).then(function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==(null===t||void 0===t?void 0:t.status)&&204!==(null===t||void 0===t?void 0:t.status)){e.next=3;break}return e.next=3,f().then(function(){var e=Object(x.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200!==(null===t||void 0===t?void 0:t.status)&&204!==(null===t||void 0===t?void 0:t.status)||(n=null===t||void 0===t?void 0:t.data.map((function(e){if(e.id===c)return e.likes})),p(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){}))},N=d.map((function(e,t){return Object(u.jsx)("div",{className:"comments m-2",id:"commentFirstId",children:Object(u.jsxs)("div",{className:"d-flex flex-row mb-2 commentclassName",id:"commentIdFirst",children:[Object(u.jsx)("img",{src:e.user.avatar,width:"40",className:"rounded-image"}),Object(u.jsxs)("div",{className:"d-flex flex-column ms-2",children:[Object(u.jsx)("span",{className:"name",children:e.user.username}),Object(u.jsx)("small",{className:"comment-text",children:e.text}),Object(u.jsx)("div",{className:"d-flex flex-row align-items-center status",children:Object(u.jsx)("small",{children:new Date(e.createdAt).toDateString()})})]})]})},t)}));return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"card mb-3",children:Object(u.jsxs)("div",{className:"row g-0",children:[Object(u.jsxs)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-4",children:[Object(u.jsx)("img",{src:a,className:"img-fluid rounded-start img-post",alt:""}),Object(u.jsx)("small",{className:"text-muted",children:new Date(s).toDateString()})]}),Object(u.jsxs)("div",{className:"col-12 col-sm-6 col-md-6 col-lg-4 post-div",children:[Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:r}),Object(u.jsx)("p",{className:"card-text",children:i}),Object(u.jsx)("hr",{})]}),Object(u.jsx)("div",{className:"d-flex justify-content-between align-items-center optionComment",children:Object(u.jsxs)("div",{className:"d-flex flex-row icons d-flex align-items-center",children:[Object(u.jsx)(h.a,{className:"bi-heart-fill mb-2 ms-1",id:"heart".concat(t),onClick:function(){return g()}}),Object(u.jsx)("p",{className:"mb-2",id:"likeQuan",children:O})]})})]}),Object(u.jsxs)("div",{className:"col-12 col-sm-6 col-md-12 col-lg-4 comment-div",id:"parentCommentId",children:[N,Object(u.jsx)("div",{className:"comment-input mx-2",children:Object(u.jsx)("input",{type:"text",className:"form-control comment-input-text"})}),Object(u.jsx)("div",{className:"mt-2 post-button",children:Object(u.jsx)("button",{type:"button",className:"btn btn-primary comment-button",children:"Comentar"})})]})]})})})};var g=function(e){var t=e.posts,c=e.search;return Object(u.jsx)("div",{className:"mt-3",children:t.filter((function(e){var t=c.toLowerCase();return e.text.toLowerCase().includes(t)})).map((function(e,t){return Object(u.jsx)(p,{id:t,postid:e.id,image:e.image,createdAt:e.createdAt,author:e.author.username,text:e.text,likes:e.likes,comments:e.comments},t)}))})};var N=function(e){e.value;var t=e.onSearch;return Object(u.jsx)("form",{className:"d-flex",children:Object(u.jsx)("input",{className:"form-control",type:"search",placeholder:"Buscar","aria-label":"Search",id:"idSearch",onChange:function(){var e;e=document.getElementById("idSearch").value,t(e)}})})};var w=function(e){var t=e.avatar,c=e.username,n=e.bio,a=e.onClickLogout,s={username:localStorage.getItem("username"),password:localStorage.getItem("password")},r=function(){(function(e){return v.post("api/logout",e)})(s).then((function(e){if(200===(null===e||void 0===e?void 0:e.status)||204===(null===e||void 0===e?void 0:e.status))return a}))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"text-center m-3",children:Object(u.jsx)("img",{className:"text-center rounded-image mx-auto d-block avatar",src:t})}),Object(u.jsx)("div",{className:"m-3",children:Object(u.jsx)("p",{className:"text-center h3",children:c})}),Object(u.jsx)("div",{className:"m-3",children:Object(u.jsx)("p",{className:"text-center",children:n})}),Object(u.jsx)("div",{className:"mt-4 d-grid gap-2",children:Object(u.jsx)("button",{className:"text-center btn btn-primary",type:"button",onClick:function(){return a(r)},children:"Salir"})})]})};var S=function(e){var t=Object(n.useState)(!1),c=Object(o.a)(t,2),a=c[0],s=c[1],r=function(e){s(e)},i=function(){setInterval((function(){r(!1)}),7e3)};return Object(u.jsxs)("div",{children:[a?Object(u.jsx)("div",{className:"errorMessage",children:Object(u.jsx)("p",{className:"ms-3 fw-bold",children:"Usuario o contrase\xf1a invalida"})}):"",Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c,n={username:t.target.email.value,password:t.target.password.value};c=n,localStorage.setItem("username",c.username),localStorage.setItem("password",c.password),function(e){return v.post("api/login",e)}(n).then((function(t){var c;200===(null===t||void 0===t?void 0:t.status)?(c=t.data,localStorage.setItem("UserID",JSON.stringify(c)),e.onLoginComplete(!0),r(!1)):(r(!0),i())})).catch((function(){r(!0),i()}))},className:"m-2",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h3",{className:"text-center mt-3",children:"Oriller Login"})}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"mb-3 mt-3",children:[Object(u.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email"}),Object(u.jsx)("input",{className:"form-control",id:"exampleInputEmail1",name:"email"})]}),Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(u.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",name:"password"})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary col-12 mt-3",children:"Login"})]})]})},k=c(2);var C=function(){var e="Loading...",t=Object(n.useState)([]),c=Object(o.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)([]),l=Object(o.a)(r,2),d=l[0],j=l[1],b=Object(n.useState)(!1),x=Object(o.a)(b,2),h=x[0],O=x[1],p=Object(n.useState)(""),C=Object(o.a)(p,2),I=C[0],L=C[1],y=Object(n.useState)("Post"),P=Object(o.a)(y,2),D=P[0],F=P[1],E=Object(k.f)(),J=JSON.parse(localStorage.getItem("UserID")),U=function(e){s(e)},A=function(e){j(e)},B=function(e){O(e),!0===e?(A(JSON.parse(localStorage.getItem("UserID"))),M(),T("Post")):E.push("/login")},M=function(){f().then((function(e){U(e.data)}))};Object(n.useEffect)((function(){var e;J?(e=J.id,v.get("api/users/"+e)).then((function(e){200===(null===e||void 0===e?void 0:e.status)?B(!0):401===(null===e||void 0===e?void 0:e.status)&&(A([]),B(!1))})).catch((function(){})):E.push("/login")}),[]);var T=function(e){F(e),"Post"===e?(M(),E.push("/")):"Logo"===e&&(U([]),E.push("/Profile"))};return Object(u.jsx)("div",{className:"container mt-4",children:Object(u.jsx)(k.c,{children:h?Object(u.jsxs)("div",{children:[Object(u.jsx)(m,{onLogoClick:function(e){return T(e)},onProfileClick:function(e){return T(e)}}),"Post"===D?a.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)(N,{value:I,onSearch:function(e){return function(e){L(e)}(e)}}),Object(u.jsx)(k.a,{path:"/",exact:!0,component:function(e){return Object(u.jsx)(g,Object(i.a)(Object(i.a)({},e),{},{posts:a,search:I}))}})]}):Object(u.jsx)("div",{children:e}):Object(u.jsx)("div",{children:Object(u.jsx)(k.a,{path:"/Profile",exact:!0,component:function(e){return Object(u.jsx)(w,Object(i.a)(Object(i.a)({},e),{},{avatar:d.avatar,username:d.username,bio:d.bio,onClickLogout:function(e){e&&(B(!1),A([]),U([]),T([]),localStorage.clear())}}))}})})]}):Object(u.jsx)("div",{children:d.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{className:"text-center",children:"Oriller Login"}),Object(u.jsx)("hr",{}),e]}):Object(u.jsx)(k.a,{path:"/login",exact:!0,component:function(e){return Object(u.jsx)(S,Object(i.a)(Object(i.a)({},e),{},{onLoginComplete:function(e){return B(e)}}))}})})})})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,68)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))},L=c(17);r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(L.a,{children:Object(u.jsx)(C,{})})}),document.getElementById("root")),I()}},[[65,1,2]]]);
//# sourceMappingURL=main.262f514c.chunk.js.map